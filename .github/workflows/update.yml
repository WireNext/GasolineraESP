name: Actualizaci칩n Diaria de Precios de Gasolina

# Define cu치ndo se ejecutar치 este flujo de trabajo
on:
  # 1. Programaci칩n diaria a las 04:00 AM (UTC)
  schedule:
    # La sintaxis cron es 'minuto hora d칤a_del_mes mes d칤a_de_la_semana'
    - cron: '0 4 * * *'
  
  # 2. Permite la ejecuci칩n manual (opcional)
  workflow_dispatch:

# Define los trabajos (jobs) que se ejecutar치n
jobs:
  update-data:
    # Se ejecutar치 en la 칰ltima versi칩n de Ubuntu
    runs-on: ubuntu-latest
    
    steps:
      # Paso 1: Descargar el c칩digo del repositorio
      - name: Checkout repository
        uses: actions/checkout@v4
      
      # Paso 2: Configurar el entorno de Python
      - name: Set up Python
        uses: actions/setup-python@v5
        with:
          python-version: '3.x'
      
      # Paso 3: Instalar las dependencias de Python (solo 'requests' para tu script)
      - name: Install dependencies
        run: pip install requests
      
      # Paso 4: Ejecutar tu script de procesamiento de datos
      - name: Run data processing script
        # Aseg칰rate de que esta ruta coincida con la ubicaci칩n de tu archivo Python
        run: python data_processor.py
      
      # Paso 5: Commit y Push del archivo GeoJSON actualizado
      # Esta acci칩n hace el commit autom치tico si hay cambios en el archivo 'gasolineras.geojson'
      - name: Commit and Push changes
        uses: stefanzweifel/git-auto-commit-action@v5
        with:
          # Especifica qu칠 archivos deben ser incluidos en el commit
          files: gasolineras.geojson
          commit_message: "游뱄 Actualizaci칩n autom치tica de precios de Minetur"
          # Permite que la acci칩n se ejecute en el horario programado
          commit_author: GitHub Actions Bot <41898282+github-actions[bot]@users.noreply.github.com>